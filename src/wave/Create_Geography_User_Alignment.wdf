["{}","{\"nodes\":{\"LOAD_DATASET19\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"TerritoryU.RoleInTerritory2\",\"TerritoryId\",\"TerritoryName\",\"AreaId\",\"AreaName\",\"RegionName\",\"Territory.TerritoryManagerId\",\"Territory.TerritoryManager\",\"isCurrentAlignment\",\"Area.AreaDirector\",\"Region.RegionManager\",\"ETMCountry\",\"Region.RegionManagerId\",\"Area.AreaDirectorId\",\"RegionId\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"name\":\"GeographyAlignment\",\"label\":\"Geography Alignment v2\",\"type\":\"analyticsDataset\"}}},\"AGGREGATE11\":{\"sources\":[\"EXTRACT5\"],\"action\":\"aggregate\",\"parameters\":{\"groupings\":[\"Id\"],\"pivots\":[],\"nodeType\":\"STANDARD\",\"aggregations\":[{\"name\":\"COUNT_Rows\",\"action\":\"COUNT\",\"label\":\"Rows\"}]}},\"DROP_FIELDS8\":{\"sources\":[\"FORMULA1\"],\"action\":\"schema\",\"parameters\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"COUNT_Rows\"]},\"fields\":[]}},\"DROP_FIELDS7\":{\"sources\":[\"FORMULA2\"],\"action\":\"schema\",\"parameters\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"COUNT_Rows\"]},\"fields\":[]}},\"DROP_FIELDS6\":{\"sources\":[\"FILTER2\"],\"action\":\"schema\",\"parameters\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"isCurrentAlignment\"]},\"fields\":[]}},\"DROP_FIELDS10\":{\"sources\":[\"FILTER6\"],\"action\":\"schema\",\"parameters\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"Hierarchy.UserId\",\"agg.Id\",\"agg.COUNT_Rows\",\"KeepThisRow\"]},\"fields\":[]}},\"LOAD_DATASET6\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"Id\",\"Name\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"sourceObjectName\":\"User\",\"label\":\"User\",\"connectionName\":\"SFDC_LOCAL\",\"type\":\"connectedDataset\"}}},\"OUTPUT0\":{\"sources\":[\"DROP_FIELDS9\"],\"action\":\"save\",\"parameters\":{\"measuresToCurrencies\":[],\"fields\":[],\"dataset\":{\"name\":\"GeographyUserAlignment_old\",\"label\":\"Geography User Alignment - Old\",\"folderName\":\"Shared_Datasets\",\"type\":\"analyticsDataset\"}}},\"DROP_FIELDS9\":{\"sources\":[\"FILTER5\"],\"action\":\"schema\",\"parameters\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"Hierarchy.UserId\"]},\"fields\":[]}},\"APPEND2\":{\"sources\":[\"DROP_FIELDS8\",\"DROP_FIELDS7\"],\"action\":\"appendV2\",\"parameters\":{\"fieldMappings\":[{\"top\":\"Area.AreaDirector\",\"bottom\":\"Area.AreaDirector\"},{\"top\":\"Area.AreaDirectorId\",\"bottom\":\"Area.AreaDirectorId\"},{\"top\":\"AreaId\",\"bottom\":\"AreaId\"},{\"top\":\"AreaName\",\"bottom\":\"AreaName\"},{\"top\":\"ETMCountry\",\"bottom\":\"ETMCountry\"},{\"top\":\"UserId\",\"bottom\":\"UserId\"}]}},\"OUTPUT0_copy0\":{\"sources\":[\"DROP_FIELDS10\"],\"action\":\"save\",\"parameters\":{\"fields\":[],\"dataset\":{\"name\":\"GeographyUserAlignment\",\"label\":\"Geography User Alignment\",\"folderName\":\"Shared_Datasets\",\"type\":\"analyticsDataset\"}}},\"APPEND3\":{\"sources\":[\"FORMULA0\",\"APPEND2\"],\"action\":\"appendV2\",\"parameters\":{\"fieldMappings\":[{\"top\":\"AreaId\",\"bottom\":\"AreaId\"},{\"top\":\"AreaName\",\"bottom\":\"AreaName\"},{\"top\":\"RegionName\",\"bottom\":\"RegionName\"},{\"top\":\"Area.AreaDirector\",\"bottom\":\"Area.AreaDirector\"},{\"top\":\"Region.RegionManager\",\"bottom\":\"Region.RegionManager\"},{\"top\":\"ETMCountry\",\"bottom\":\"ETMCountry\"},{\"top\":\"Region.RegionManagerId\",\"bottom\":\"Region.RegionManagerId\"},{\"top\":\"Area.AreaDirectorId\",\"bottom\":\"Area.AreaDirectorId\"},{\"top\":\"RegionId\",\"bottom\":\"RegionId\"},{\"top\":\"UserId\",\"bottom\":\"UserId\"}]}},\"FORMULA0\":{\"sources\":[\"DROP_FIELDS6\"],\"action\":\"formula\",\"parameters\":{\"expressionType\":\"SQL\",\"fields\":[{\"formulaExpression\":\"\\\"Territory.TerritoryManagerId\\\"\",\"defaultValue\":\"\",\"precision\":255,\"name\":\"UserId\",\"label\":\"UserId\",\"type\":\"TEXT\"}]}},\"FORMULA1\":{\"sources\":[\"AGGREGATE7\"],\"action\":\"formula\",\"parameters\":{\"expressionType\":\"SQL\",\"fields\":[{\"formulaExpression\":\"\\\"Region.RegionManagerId\\\"\",\"defaultValue\":\"\",\"precision\":255,\"name\":\"UserId\",\"label\":\"UserId\",\"type\":\"TEXT\"}]}},\"FORMULA2\":{\"sources\":[\"AGGREGATE9\"],\"action\":\"formula\",\"parameters\":{\"expressionType\":\"SQL\",\"fields\":[{\"formulaExpression\":\"\\\"Area.AreaDirectorId\\\"\",\"defaultValue\":\"\",\"precision\":255,\"name\":\"UserId\",\"label\":\"UserId\",\"type\":\"TEXT\"}]}},\"FORMULA3\":{\"sources\":[\"JOIN1\"],\"action\":\"formula\",\"parameters\":{\"expressionType\":\"SQL\",\"fields\":[{\"formulaExpression\":\"case when \\\"agg.COUNT_Rows\\\" > 1 then \\r\\n    case when \\\"Hierarchy.TerritoryName\\\" is null then 'false'\\r\\n    else 'true'\\r\\n    end\\r\\nelse 'true'\\r\\nend\",\"defaultValue\":\"\",\"precision\":255,\"name\":\"KeepThisRow\",\"label\":\"KeepThisRow\",\"type\":\"TEXT\"}]}},\"AGGREGATE7\":{\"sources\":[\"EXTRACT3\"],\"action\":\"aggregate\",\"parameters\":{\"groupings\":[\"Area.AreaDirector\",\"Area.AreaDirectorId\",\"AreaId\",\"AreaName\",\"ETMCountry\",\"RegionId\",\"Region.RegionManager\",\"Region.RegionManagerId\",\"RegionName\"],\"pivots\":[],\"nodeType\":\"STANDARD\",\"aggregations\":[{\"name\":\"COUNT_Rows\",\"action\":\"COUNT\",\"label\":\"Rows\"}]}},\"FILTER4\":{\"sources\":[\"DROP_FIELDS6\"],\"action\":\"filter\",\"parameters\":{\"filterExpressions\":[{\"operands\":[],\"field\":\"Area.AreaDirectorId\",\"type\":\"TEXT\",\"operator\":\"IS_NOT_NULL\"}]}},\"FILTER5\":{\"sources\":[\"JOIN0\"],\"action\":\"filter\",\"parameters\":{\"filterExpressions\":[{\"operands\":[],\"field\":\"Hierarchy.UserId\",\"type\":\"TEXT\",\"operator\":\"IS_NOT_NULL\"}]}},\"AGGREGATE9\":{\"sources\":[\"EXTRACT4\"],\"action\":\"aggregate\",\"parameters\":{\"groupings\":[\"Area.AreaDirector\",\"Area.AreaDirectorId\",\"AreaId\",\"AreaName\",\"ETMCountry\"],\"pivots\":[],\"nodeType\":\"STANDARD\",\"aggregations\":[{\"name\":\"COUNT_Rows\",\"action\":\"COUNT\",\"label\":\"Rows\"}]}},\"FILTER6\":{\"sources\":[\"FORMULA3\"],\"action\":\"filter\",\"parameters\":{\"filterExpressions\":[{\"operands\":[\"true\"],\"field\":\"KeepThisRow\",\"type\":\"TEXT\",\"operator\":\"EQUAL\"},{\"operands\":[],\"field\":\"Hierarchy.UserId\",\"type\":\"TEXT\",\"operator\":\"IS_NOT_NULL\"}]}},\"FILTER2\":{\"sources\":[\"LOAD_DATASET19\"],\"action\":\"filter\",\"parameters\":{\"filterExpressions\":[{\"operands\":[\"true\"],\"field\":\"isCurrentAlignment\",\"type\":\"TEXT\",\"operator\":\"EQUAL\"}]}},\"FILTER3\":{\"sources\":[\"DROP_FIELDS6\"],\"action\":\"filter\",\"parameters\":{\"filterExpressions\":[{\"operands\":[],\"field\":\"Region.RegionManagerId\",\"type\":\"TEXT\",\"operator\":\"IS_NOT_NULL\"}]}},\"JOIN1\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[]},\"fields\":[]},\"sources\":[\"JOIN0_copy0\",\"AGGREGATE11\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"Id\"],\"rightQualifier\":\"agg\",\"rightKeys\":[\"Id\"],\"joinType\":\"LOOKUP\"}},\"JOIN0\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[]},\"fields\":[]},\"sources\":[\"LOAD_DATASET6\",\"APPEND3\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"Id\"],\"rightQualifier\":\"Hierarchy\",\"rightKeys\":[\"UserId\"],\"joinType\":\"LOOKUP\"}},\"JOIN0_copy0\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[]},\"fields\":[]},\"sources\":[\"LOAD_DATASET6\",\"APPEND3\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"Id\"],\"rightQualifier\":\"Hierarchy\",\"rightKeys\":[\"UserId\"],\"joinType\":\"INNER\"}},\"EXTRACT5\":{\"sources\":[\"JOIN0_copy0\"],\"action\":\"extractGrains\",\"parameters\":{\"grainExtractions\":[]}},\"EXTRACT3\":{\"sources\":[\"FILTER3\"],\"action\":\"extractGrains\",\"parameters\":{\"grainExtractions\":[]}},\"EXTRACT4\":{\"sources\":[\"FILTER4\"],\"action\":\"extractGrains\",\"parameters\":{\"grainExtractions\":[]}}},\"ui\":{\"hiddenColumns\":[],\"connectors\":[{\"source\":\"LOAD_DATASET6\",\"target\":\"JOIN0_copy0\"},{\"source\":\"TRANSFORM16\",\"target\":\"TRANSFORM15\"},{\"source\":\"LOAD_DATASET19\",\"target\":\"FILTER2\"},{\"source\":\"FILTER2\",\"target\":\"TRANSFORM16\"},{\"source\":\"FILTER3\",\"target\":\"AGGREGATE6\"},{\"source\":\"FILTER4\",\"target\":\"AGGREGATE8\"},{\"source\":\"AGGREGATE6\",\"target\":\"TRANSFORM17\"},{\"source\":\"AGGREGATE8\",\"target\":\"TRANSFORM18\"},{\"source\":\"TRANSFORM16\",\"target\":\"FILTER3\"},{\"source\":\"TRANSFORM16\",\"target\":\"FILTER4\"},{\"source\":\"TRANSFORM17\",\"target\":\"APPEND2\"},{\"source\":\"TRANSFORM18\",\"target\":\"APPEND2\"},{\"source\":\"TRANSFORM15\",\"target\":\"APPEND3\"},{\"source\":\"APPEND2\",\"target\":\"APPEND3\"},{\"source\":\"LOAD_DATASET6\",\"target\":\"JOIN0\"},{\"source\":\"APPEND3\",\"target\":\"JOIN0\"},{\"source\":\"JOIN0\",\"target\":\"FILTER5\"},{\"source\":\"FILTER5\",\"target\":\"TRANSFORM19\"},{\"source\":\"TRANSFORM19\",\"target\":\"OUTPUT0\"},{\"source\":\"APPEND3\",\"target\":\"JOIN0_copy0\"},{\"source\":\"JOIN0_copy0\",\"target\":\"AGGREGATE10\"},{\"source\":\"JOIN0_copy0\",\"target\":\"JOIN1\"},{\"source\":\"AGGREGATE10\",\"target\":\"JOIN1\"},{\"source\":\"JOIN1\",\"target\":\"TRANSFORM20\"},{\"source\":\"TRANSFORM21\",\"target\":\"OUTPUT0_copy0\"},{\"source\":\"TRANSFORM20\",\"target\":\"FILTER6\"},{\"source\":\"FILTER6\",\"target\":\"TRANSFORM21\"}],\"nodes\":{\"FILTER4\":{\"top\":532.4,\"left\":531.8,\"description\":\"\",\"label\":\"AD not NULL\",\"type\":\"FILTER\"},\"AGGREGATE8\":{\"connectors\":[{\"source\":\"EXTRACT4\",\"target\":\"AGGREGATE9\"}],\"top\":532.4,\"left\":671.8,\"description\":\"\",\"label\":\"Area\",\"type\":\"AGGREGATE\",\"graph\":{\"AGGREGATE9\":null,\"EXTRACT4\":null}},\"FILTER5\":{\"top\":252.10000000000002,\"left\":1372,\"description\":\"\",\"label\":\"Alignment not NULL\",\"type\":\"FILTER\"},\"AGGREGATE10\":{\"connectors\":[{\"source\":\"EXTRACT5\",\"target\":\"AGGREGATE11\"}],\"top\":112.19999999999999,\"left\":1232,\"label\":\"Aggregate 10\",\"type\":\"AGGREGATE\",\"graph\":{\"AGGREGATE11\":null,\"EXTRACT5\":null}},\"FILTER6\":{\"top\":112,\"left\":1652,\"label\":\"Filter 6\",\"type\":\"FILTER\"},\"LOAD_DATASET19\":{\"top\":252.2,\"left\":111.80000000000001,\"label\":\"Geography Alignment v2\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":2000}},\"FILTER2\":{\"top\":252.39999999999998,\"left\":251.8,\"description\":\"\",\"label\":\"Current Alignment?\",\"type\":\"FILTER\"},\"FILTER3\":{\"top\":392.4,\"left\":531.8,\"description\":\"\",\"label\":\"RM not NULL\",\"type\":\"FILTER\"},\"TRANSFORM20\":{\"connectors\":[],\"top\":112,\"left\":1512,\"label\":\"Transform 20\",\"type\":\"TRANSFORM\",\"graph\":{\"FORMULA3\":{\"label\":\"Formula - Keep This Row\",\"parameters\":{\"type\":\"BASE_FORMULA_UI\"}}}},\"AGGREGATE6\":{\"connectors\":[{\"source\":\"EXTRACT3\",\"target\":\"AGGREGATE7\"}],\"top\":392.4,\"left\":671.8,\"description\":\"\",\"label\":\"Region\",\"type\":\"AGGREGATE\",\"graph\":{\"AGGREGATE7\":null,\"EXTRACT3\":null}},\"TRANSFORM21\":{\"connectors\":[],\"top\":112,\"left\":1792,\"label\":\"Transform 21\",\"type\":\"TRANSFORM\",\"graph\":{\"DROP_FIELDS10\":{\"label\":\"Drop Columns\"}}},\"LOAD_DATASET6\":{\"top\":252,\"left\":1092,\"description\":\"\",\"label\":\"User\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":10000}},\"TRANSFORM19\":{\"connectors\":[],\"top\":252.10000000000002,\"left\":1512,\"description\":\"\",\"label\":\"Clean Up\",\"type\":\"TRANSFORM\",\"graph\":{\"DROP_FIELDS9\":{\"label\":\"Drop Columns\"}}},\"JOIN1\":{\"top\":113.30000000000001,\"left\":1372,\"label\":\"Join 1\",\"type\":\"JOIN\"},\"JOIN0\":{\"top\":252.10000000000002,\"left\":1232,\"description\":\"\",\"label\":\"Join\",\"type\":\"JOIN\"},\"JOIN0_copy0\":{\"top\":112.19999999999999,\"left\":1092.1,\"description\":\"\",\"label\":\"Join Copy\",\"type\":\"JOIN\"},\"OUTPUT0\":{\"top\":252.10000000000002,\"left\":1652,\"description\":\"\",\"label\":\"Output\",\"type\":\"OUTPUT\"},\"TRANSFORM15\":{\"connectors\":[],\"top\":252.39999999999998,\"left\":811.8,\"description\":\"\",\"label\":\"Territory Manager\",\"type\":\"TRANSFORM\",\"graph\":{\"FORMULA0\":{\"label\":\"TM --> UserId\",\"parameters\":{\"type\":\"BASE_FORMULA_UI\"}}}},\"TRANSFORM16\":{\"connectors\":[],\"top\":252.39999999999998,\"left\":391.8,\"description\":\"\",\"label\":\"Clean Up\",\"type\":\"TRANSFORM\",\"graph\":{\"DROP_FIELDS6\":{\"label\":\"Drop Columns\"}}},\"TRANSFORM17\":{\"connectors\":[{\"source\":\"FORMULA1\",\"target\":\"DROP_FIELDS8\"}],\"top\":392.4,\"left\":811.8,\"description\":\"\",\"label\":\"Region Manager\",\"type\":\"TRANSFORM\",\"graph\":{\"FORMULA1\":{\"label\":\"RM --> UserId\",\"parameters\":{\"type\":\"BASE_FORMULA_UI\"}},\"DROP_FIELDS8\":{\"label\":\"Drop Columns\"}}},\"TRANSFORM18\":{\"connectors\":[{\"source\":\"FORMULA2\",\"target\":\"DROP_FIELDS7\"}],\"top\":532.4,\"left\":811.8,\"description\":\"\",\"label\":\"Area Director\",\"type\":\"TRANSFORM\",\"graph\":{\"FORMULA2\":{\"label\":\"AD --> UserId\",\"parameters\":{\"type\":\"BASE_FORMULA_UI\"}},\"DROP_FIELDS7\":{\"label\":\"Drop Columns\"}}},\"APPEND2\":{\"top\":392.4,\"left\":951.8,\"description\":\"\",\"label\":\"Append AD/RM\",\"type\":\"APPEND\"},\"OUTPUT0_copy0\":{\"top\":112,\"left\":1932,\"description\":\"\",\"label\":\"Output Copy\",\"type\":\"OUTPUT\"},\"APPEND3\":{\"top\":252.39999999999998,\"left\":951.8,\"description\":\"\",\"label\":\"Append AD/RM/TM\",\"type\":\"APPEND\"}}},\"version\":\"58.0\",\"runMode\":\"full\"}"]