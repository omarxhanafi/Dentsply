<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <actionCalls>
        <name>checkDealerAccessAction</name>
        <label>checkDealerAccess</label>
        <locationX>181</locationX>
        <locationY>825</locationY>
        <actionName>Flow_CheckRecordAccess</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>DescAlreadyConverted</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>recordId</name>
            <value>
                <elementReference>Get_lead.Dealer__c</elementReference>
            </value>
        </inputParameters>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Nav2Opp</name>
        <label>Nav2Opp</label>
        <locationX>3119</locationX>
        <locationY>417</locationY>
        <actionName>c:ServiceCloud_Nav2SObj</actionName>
        <actionType>component</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>recordId</name>
            <value>
                <elementReference>Opp2Create.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>51.0</apiVersion>
    <assignments>
        <name>Assign_data_from_Sales_Lead</name>
        <label>Assign data from Sales Lead</label>
        <locationX>755</locationX>
        <locationY>611</locationY>
        <assignmentItems>
            <assignToReference>Opp2Create.CampaignId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.Campaign__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_opportunity_data</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_data_from_Target_List</name>
        <label>Assign data from Target List</label>
        <locationX>746</locationX>
        <locationY>166</locationY>
        <assignmentItems>
            <assignToReference>Opp2Create.CampaignId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_inititative.Campaign__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.LeadSource</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_inititative.Source__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_opportunity_data</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_opp_input</name>
        <label>Assign opp input</label>
        <locationX>1553</locationX>
        <locationY>403</locationY>
        <assignmentItems>
            <assignToReference>Opp2Create.CloseDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Close_date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>TempOwnerCheck</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.Amount</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AmountInput</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.CustomerNotes__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.CustomerNotes__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_opportunity</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_opportunity_data</name>
        <label>Assign opportunity data</label>
        <locationX>890</locationX>
        <locationY>312</locationY>
        <assignmentItems>
            <assignToReference>Opp2Create.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>0120J00000079nDQAQ</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.AccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.Account__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>x</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.CloseDate</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.NA_Category__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.Category__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.StageName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>0. Prospect</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.Type</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New Business</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.LeadSource</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_inititative.Source__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.Prospect__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.NA_Brand__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.Brand__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Owner.Id</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ManualNameString</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>true</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.AccountProgramMember__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.AccountProgramMember__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.Primary_Contact__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.Contact__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Opp2Create.ContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.Contact__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>DealerAccessDecision</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignDealer</name>
        <label>Assign dealer</label>
        <locationX>1021</locationX>
        <locationY>671</locationY>
        <assignmentItems>
            <assignToReference>Opp2Create.Dealer__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_lead.Dealer__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Opportunity_details</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignManualName</name>
        <label>Assign Manual Name</label>
        <locationX>1004</locationX>
        <locationY>68</locationY>
        <assignmentItems>
            <assignToReference>Opp2Create.ManualName__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SelectOwnerScreen</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AssignOppToQA</name>
        <label>Assign opp</label>
        <locationX>2418</locationX>
        <locationY>75</locationY>
        <assignmentItems>
            <assignToReference>QAToLoop.Opportunity_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Opp2Create.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdateQA</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assignOwnerAutomatically</name>
        <label>Assign owner automatically</label>
        <locationX>1136</locationX>
        <locationY>606</locationY>
        <assignmentItems>
            <assignToReference>Owner.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_opp_input</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_owner_not_assigned</name>
        <label>Set owner not assigned</label>
        <locationX>1392</locationX>
        <locationY>241</locationY>
        <assignmentItems>
            <assignToReference>OwnerNotAssigned</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SelectOwnerScreen</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>UpdateOppOwner</name>
        <label>Update opp owner</label>
        <locationX>2090</locationX>
        <locationY>186</locationY>
        <assignmentItems>
            <assignToReference>Opp2Create.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Owner.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UpdateOpp</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>DealerAccessDecision</name>
        <label>Has dealer access?</label>
        <locationX>857</locationX>
        <locationY>677</locationY>
        <defaultConnector>
            <targetReference>Opportunity_details</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>HasDealerAccess</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>checkDealerAccessAction</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>None</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>checkDealerAccessAction</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignDealer</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>DescAlreadyConverted</name>
        <label>Already converted?</label>
        <locationX>424</locationX>
        <locationY>827</locationY>
        <defaultConnector>
            <targetReference>Initiative_assigned</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IsAlreadyConverted</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_lead.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AlreadyConverted</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>descOwnerAssignedManually</name>
        <label>Owner assigned manually?</label>
        <locationX>1124</locationX>
        <locationY>406</locationY>
        <defaultConnector>
            <targetReference>SelectOwnerScreen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>outcomeOwnerAssignedAutomatically</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Get_lead.Account__r.Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>US</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_lead.Account__r.Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>CA</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_lead.Account__r.Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>IN</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_lead.Account__r.Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ES</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_lead.Account__r.Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>PT</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_lead.Account__r.Country__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>AD</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assignOwnerAutomatically</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <name>Initiative_assigned</name>
        <label>Initiative assigned?</label>
        <locationX>562</locationX>
        <locationY>614</locationY>
        <defaultConnector>
            <targetReference>Assign_data_from_Sales_Lead</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>InitAssigned</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_lead.Field_Sales_Project__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_inititative</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_owner_assigned</name>
        <label>Is owner assigned?</label>
        <locationX>1392</locationX>
        <locationY>404</locationY>
        <defaultConnector>
            <targetReference>Set_owner_not_assigned</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>OwnerAssigned</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Owner.Id</leftValueReference>
                <operator>NotEqualTo</operator>
            </conditions>
            <connector>
                <targetReference>Assign_opp_input</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>ManualNameDecision</name>
        <label>Manual name?</label>
        <locationX>991</locationX>
        <locationY>269</locationY>
        <defaultConnector>
            <targetReference>descOwnerAssignedManually</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Manual_name_set</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ManualName.resId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>ManualNameString</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AssignManualName</targetReference>
            </connector>
            <label>Manual name set</label>
        </rules>
    </decisions>
    <decisions>
        <name>QA_Check</name>
        <label>Are Q&amp;As assigned?</label>
        <locationX>2460</locationX>
        <locationY>432</locationY>
        <defaultConnector>
            <targetReference>Nav2Opp</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetRelQA</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>LoopQA</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>220808: TFUS-000004617: Iberia owner skip
220120: TFUS-000003955: Recreate the Fault connection from &quot;Update Lead&quot; to &quot;scrErrorMessage&quot; since this didn&apos;t work properly.
Converting Sales Leads into Opportunities
210720: TFUS-000003206: Modified to use standard functionality of creating OpportunityContactRole by populating `Opportunity.ContactId`
210705 TFUS-000003230: Assigning the running user as the opp owner for US and CA
210511 TFUS-000002920: Added the Sales Lead&apos;s contact as the Primary contact on the created Opportunity
210421 TFUS-000002904: Switched to system mode (without sharing) and added opportunity team member creation</description>
    <dynamicChoiceSets>
        <name>ConvertChoice</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Converted_to__c</picklistField>
        <picklistObject>Field_Sales_Project_Members__c</picklistObject>
    </dynamicChoiceSets>
    <formulas>
        <name>ChatterMessage</name>
        <dataType>String</dataType>
        <expression>{!$Label.Order_Dear}&amp;&apos; @[&apos; &amp; {!Get_lead.CreatedById} &amp; &apos;], &apos; &amp; {!$Label.ConvertedSalesLead} &amp; &apos;: &apos; &amp; {!Opp2Create.Id}</expression>
    </formulas>
    <formulas>
        <name>currentUser</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>TempOwnerCheck</name>
        <dataType>String</dataType>
        <expression>IF( OR( {!Get_lead.Sales_Rep__c}!= null, {!Get_lead.Sales_Rep__c} != &apos;&apos;), {!Get_lead.Sales_Rep__c}, {!$User.Id})</expression>
    </formulas>
    <interviewLabel>Lead: Convert lead {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Lead: Convert lead</label>
    <loops>
        <name>LoopQA</name>
        <label>Loop Q&amp;As</label>
        <locationX>2481</locationX>
        <locationY>254</locationY>
        <assignNextValueToReference>QAToLoop</assignNextValueToReference>
        <collectionReference>GetRelQA</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AssignOppToQA</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Nav2Opp</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_opportunity</name>
        <label>Create opportunity</label>
        <locationX>1682</locationX>
        <locationY>403</locationY>
        <connector>
            <targetReference>Update_initiative_account</targetReference>
        </connector>
        <faultConnector>
            <targetReference>scrErrorMessage</targetReference>
        </faultConnector>
        <inputReference>Opp2Create</inputReference>
    </recordCreates>
    <recordCreates>
        <description>TFUS-000002904</description>
        <name>createOpportunityTeamMember</name>
        <label>createOpportunityTeamMember</label>
        <locationX>1908</locationX>
        <locationY>188</locationY>
        <connector>
            <targetReference>UpdateOppOwner</targetReference>
        </connector>
        <faultConnector>
            <targetReference>scrErrorMessage</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>OpportunityAccessLevel</field>
            <value>
                <stringValue>Edit</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OpportunityId</field>
            <value>
                <elementReference>Opp2Create.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>TeamMemberRole</field>
            <value>
                <stringValue>Opportunity Creator</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>UserId</field>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </inputAssignments>
        <object>OpportunityTeamMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Get_inititative</name>
        <label>Get inititative</label>
        <locationX>574</locationX>
        <locationY>163</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_data_from_Target_List</targetReference>
        </connector>
        <faultConnector>
            <targetReference>scrErrorMessage</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_lead.Field_Sales_Project__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Field_Sales_Project__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_lead</name>
        <label>Get lead</label>
        <locationX>181</locationX>
        <locationY>602</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>checkDealerAccessAction</targetReference>
        </connector>
        <faultConnector>
            <targetReference>scrErrorMessage</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Field_Sales_Project_Members__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>GetRelQA</name>
        <label>Get related Q&amp;A&apos;s</label>
        <locationX>2349</locationX>
        <locationY>566</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>QA_Check</targetReference>
        </connector>
        <faultConnector>
            <targetReference>scrErrorMessage</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Prospect__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Q_A__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Question__c</queriedFields>
        <queriedFields>Questionnaire_Setup__c</queriedFields>
        <queriedFields>Answer__c</queriedFields>
        <queriedFields>Opportunity_Name__c</queriedFields>
        <sortField>Id</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_initiative_account</name>
        <label>Update lead</label>
        <locationX>1910</locationX>
        <locationY>404</locationY>
        <connector>
            <targetReference>createOpportunityTeamMember</targetReference>
        </connector>
        <faultConnector>
            <targetReference>scrErrorMessage</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Converted_to__c</field>
            <value>
                <stringValue>Opportunity</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>Opp2Create.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status__c</field>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </inputAssignments>
        <object>Field_Sales_Project_Members__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateOpp</name>
        <label>Update opportunity</label>
        <locationX>2087</locationX>
        <locationY>567</locationY>
        <connector>
            <targetReference>GetRelQA</targetReference>
        </connector>
        <faultConnector>
            <targetReference>scrErrorMessage</targetReference>
        </faultConnector>
        <inputReference>Opp2Create</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>UpdateQA</name>
        <label>Update Q&amp;A</label>
        <locationX>2546</locationX>
        <locationY>75</locationY>
        <connector>
            <targetReference>LoopQA</targetReference>
        </connector>
        <faultConnector>
            <targetReference>scrErrorMessage</targetReference>
        </faultConnector>
        <inputReference>QAToLoop</inputReference>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <name>AlreadyConverted</name>
        <label>Already converted</label>
        <locationX>624</locationX>
        <locationY>824</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>AlreadyConvertedHeader</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 18px;&quot;&gt;Already converted&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>AlreadyConvertedBody</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;Unfortunately, it seems this sales lead has already been converted.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Opportunity_details</name>
        <label>Opportunity details</label>
        <locationX>1000</locationX>
        <locationY>394</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>ManualNameDecision</targetReference>
        </connector>
        <fields>
            <name>OppScript</name>
            <extensionName>c:ServiceCloud_FlowScript</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>scriptText</name>
                <value>
                    <stringValue>Please add details about the new opportunity</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>CrossSellCheck</name>
            <extensionName>flowruntime:toggle</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Cross-sell opportunity?</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>messageToggleActive</name>
                <value>
                    <stringValue>Yes</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>messageToggleInactive</name>
                <value>
                    <stringValue>No</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>value</name>
                <value>
                    <elementReference>Get_lead.CrossSellProspect__c</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>Opp2Create.CrossSellOpportunity__c</assignToReference>
                <name>value</name>
            </outputParameters>
        </fields>
        <fields>
            <name>StageInput</name>
            <extensionName>c:Flow_InputField</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>objType</name>
                <value>
                    <stringValue>Opportunity</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldN</name>
                <value>
                    <stringValue>StageName</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>resId</name>
                <value>
                    <elementReference>Opp2Create.StageName</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordTypeId</name>
                <value>
                    <elementReference>Opp2Create.RecordTypeId</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldVal</name>
                <value>
                    <elementReference>Opp2Create.StageName</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>Opp2Create.StageName</assignToReference>
                <name>resId</name>
            </outputParameters>
        </fields>
        <fields>
            <name>Close_date</name>
            <dataType>Date</dataType>
            <defaultValue>
                <elementReference>Get_lead.IntentionToBuyDate__c</elementReference>
            </defaultValue>
            <fieldText>Close date</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>AmountInput</name>
            <dataType>Currency</dataType>
            <fieldText>Amount</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
            <scale>0</scale>
        </fields>
        <fields>
            <name>InputType</name>
            <extensionName>c:Flow_InputField</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>fieldN</name>
                <value>
                    <stringValue>Type</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldVal</name>
                <value>
                    <elementReference>Opp2Create.Type</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objType</name>
                <value>
                    <stringValue>Opportunity</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordTypeId</name>
                <value>
                    <elementReference>Opp2Create.RecordTypeId</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>Opp2Create.Type</assignToReference>
                <name>resId</name>
            </outputParameters>
        </fields>
        <fields>
            <name>LeadSourceInput</name>
            <extensionName>c:Flow_InputField</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>fieldN</name>
                <value>
                    <stringValue>LeadSource</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>objType</name>
                <value>
                    <stringValue>Opportunity</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordTypeId</name>
                <value>
                    <elementReference>Opp2Create.RecordTypeId</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldVal</name>
                <value>
                    <elementReference>Get_lead.Source__c</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>Opp2Create.LeadSource</assignToReference>
                <name>resId</name>
            </outputParameters>
        </fields>
        <fields>
            <name>ManualName</name>
            <extensionName>c:Flow_InputField</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>objType</name>
                <value>
                    <stringValue>Opportunity</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldN</name>
                <value>
                    <stringValue>ManualName__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordTypeId</name>
                <value>
                    <elementReference>Opp2Create.RecordTypeId</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldVal</name>
                <value>
                    <elementReference>ManualNameCheck</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>ManualNameInput</name>
            <extensionName>c:Flow_InputField</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>objType</name>
                <value>
                    <stringValue>Opportunity</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldN</name>
                <value>
                    <stringValue>Name</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordTypeId</name>
                <value>
                    <elementReference>Opp2Create.RecordTypeId</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>Opp2Create.Name</assignToReference>
                <name>resId</name>
            </outputParameters>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>ManualName.resId</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <elementReference>ManualNameString</elementReference>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>scrErrorMessage</name>
        <label>scrErrorMessage</label>
        <locationX>1627</locationX>
        <locationY>990</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>msgError</name>
            <fieldText>&lt;p&gt;Something went wrong in the Flow, please contact your administrator and provide the following details:&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>SelectOwnerScreen</name>
        <label>Select owner</label>
        <locationX>1265</locationX>
        <locationY>402</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Is_owner_assigned</targetReference>
        </connector>
        <fields>
            <name>OppOwnerScript</name>
            <extensionName>c:ServiceCloud_FlowScript</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>scriptText</name>
                <value>
                    <stringValue>Please select an owner of the new opportunity</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>AssignOwner</name>
            <extensionName>c:Flow_SelectUserFromAccountTerritories</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>recordId</name>
                <value>
                    <elementReference>Opp2Create.AccountId</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectedUsers</name>
                <value>
                    <elementReference>Owner</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>Owner</assignToReference>
                <name>selectedUsers</name>
            </outputParameters>
        </fields>
        <fields>
            <name>ManualOwner</name>
            <extensionName>flowruntime:lookup</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>objectApiName</name>
                <value>
                    <stringValue>Field_Sales_Project_Members__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldApiName</name>
                <value>
                    <stringValue>Sales_Rep__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>...or assign an owner manually</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>Owner.Id</assignToReference>
                <name>recordId</name>
            </outputParameters>
        </fields>
        <fields>
            <name>NeedToAssignOwner</name>
            <fieldText>&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;Please note! You need to assign an owner in order to create the opportunity.&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>OwnerNotAssigned</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>365</locationY>
        <connector>
            <targetReference>Get_lead</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>ChatterPost</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FeedItem</objectType>
    </variables>
    <variables>
        <name>createdOrderId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ManualNameCheck</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ManualNameString</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>true</stringValue>
        </value>
    </variables>
    <variables>
        <name>Opp2Create</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>OppContactRole</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityContactRole</objectType>
    </variables>
    <variables>
        <name>Owner</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>User</objectType>
    </variables>
    <variables>
        <name>OwnerNotAssigned</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>QAToLoop</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Q_A__c</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
