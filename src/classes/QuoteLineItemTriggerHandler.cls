/*-------------------------------------------------------------------------------------------------------
Author:         Miguel Coimbra (Salesforce) 2022-08-08
Description:    Quote Line Item  Trigger Handler Class
History
----------------------------------------------------------------------------------------*/
public with sharing class QuoteLineItemTriggerHandler extends TriggerHandler {
    private List<QuoteLineItem> oldQuoteLineItemList, newQuoteLineItemList;
    private Map<Id, QuoteLineItem> oldQuoteLineItemMap, newQuoteLineItemMap;

    public QuoteLineItemTriggerHandler() {
        oldQuoteLineItemList = (List<QuoteLineItem>) Trigger.old;
        newQuoteLineItemList = (List<QuoteLineItem>) Trigger.new;
        oldQuoteLineItemMap = (Map<Id, QuoteLineItem>) Trigger.oldMap;
        newQuoteLineItemMap = (Map<Id, QuoteLineItem>) Trigger.newMap;
    }

    protected override void beforeDelete() {
        QuoteLineItemTriggerHelper.canBeDeleted(oldQuoteLineItemList);
    }

    protected override void beforeInsert()
    {
        // Fix Quote Line items generated by the standard while creating a new quote
        QuoteLineItemTriggerHelper.checkAndUpdateQuoteLineItems(newQuoteLineItemList);
    }
}